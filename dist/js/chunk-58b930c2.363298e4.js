(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58b930c2"],{"14c3":function(e,t,n){var r=n("c6b6"),s=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var a=n.call(e,t);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return s.call(e,t)}},"50cb":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("WebSocket聊天室")]),n("div",{staticClass:"chatroom"},[n("div",{staticClass:"users"},[n("div",{staticClass:"me"},[e._v(e._s(e.user))]),n("div",{ref:"others",staticClass:"others roll"},e._l(e.userlist,(function(t,r){return n("div",{key:r,staticClass:"other"},[e._v(e._s(t))])})),0)]),n("div",{staticClass:"chat"},[n("div",{ref:"msgs",staticClass:"msgs roll"},e._l(e.msgs,(function(t,r){return n("div",{key:r,staticClass:"msg"},[n("div",{staticClass:"container",class:t.user==e.user?"me":{}},[n("div",{staticClass:"title"},[n("span",{staticClass:"user"},[e._v(e._s(t.user))]),n("span",{staticClass:"time"},[e._v(e._s(t.time))])]),n("pre",{staticClass:"news"},[e._v(e._s(t.msg))])])])})),0),n("div",{staticClass:"input_msg"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],attrs:{cols:"30",rows:"10",placeholder:"ctrl+回车发送消息"},domProps:{value:e.msg},on:{keypress:e.send,input:function(t){t.target.composing||(e.msg=t.target.value)}}}),e._v(" "),n("div",{staticClass:"footer"},[n("button",{on:{click:function(t){return e.send(!0)}}},[e._v("发送")])])])])])])},s=[],a=(n("ac1f"),n("5319"),null),c={data:function(){return{user:"",userlist:[],msgs:[],msg:""}},created:function(){a=new WebSocket("ws://localhost:666"),this.Heartbeat()},mounted:function(){var e=this;a.onmessage=function(t){var n=JSON.parse(t.data),r=n.res;-1==n.code||(200==n.code?(e.userlist=r.online,e.$nextTick((function(){e.$refs.others.scrollTop=e.$refs.others.scrollHeight}))):201==n.code?e.user=r.user:202==n.code?(n.res.msg=n.res.msg.replace(/↵/g,"\n"),e.msgs.push(n.res),e.$nextTick((function(){e.$refs.msgs.scrollTop=e.$refs.msgs.scrollHeight}))):300==n.code&&console.log("心跳，扑通"))},a.onclose=function(e){console.log("websocket 断开: "+e.code+" "+e.reason+" "+e.wasClean),console.log(e),alert("连接已经关闭"),console.log("连接已经关闭")}},methods:{send:function(e){if(("Enter"==e.code&&1==e.ctrlKey||!0===e)&&""!==this.msg){var t={type:"text",msg:this.msg};t=JSON.stringify(t),a.send(t),this.msg=""}},Heartbeat:function(){var e={type:"state",msg:null};e=JSON.stringify(e),setInterval((function(){a.send(e)}),3e4)}}};window.onbeforeunload=function(){a.close()};var i=c,o=(n("5c63"),n("2877")),l=Object(o["a"])(i,r,s,!1,null,"da279d3a",null);t["default"]=l.exports},5319:function(e,t,n){"use strict";var r=n("d784"),s=n("825a"),a=n("7b0b"),c=n("50c4"),i=n("a691"),o=n("1d80"),l=n("8aa5"),u=n("14c3"),d=Math.max,f=Math.min,v=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var x=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,E=x?"$":"$0";return[function(n,r){var s=o(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,s,r):t.call(String(s),n,r)},function(e,r){if(!x&&m||"string"===typeof r&&-1===r.indexOf(E)){var a=n(t,e,this,r);if(a.done)return a.value}var o=s(e),v=String(this),g="function"===typeof r;g||(r=String(r));var p=o.global;if(p){var b=o.unicode;o.lastIndex=0}var y=[];while(1){var C=u(o,v);if(null===C)break;if(y.push(C),!p)break;var S=String(C[0]);""===S&&(o.lastIndex=l(v,c(o.lastIndex),b))}for(var R="",$=0,w=0;w<y.length;w++){C=y[w];for(var I=String(C[0]),A=d(f(i(C.index),v.length),0),T=[],k=1;k<C.length;k++)T.push(h(C[k]));var P=C.groups;if(g){var N=[I].concat(T,A,v);void 0!==P&&N.push(P);var U=String(r.apply(void 0,N))}else U=_(I,v,A,T,P,r);A>=$&&(R+=v.slice($,A)+U,$=A+I.length)}return R+v.slice($)}];function _(e,n,r,s,c,i){var o=r+e.length,l=s.length,u=p;return void 0!==c&&(c=a(c),u=g),t.call(i,u,(function(t,a){var i;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(o);case"<":i=c[a.slice(1,-1)];break;default:var u=+a;if(0===u)return t;if(u>l){var d=v(u/10);return 0===d?t:d<=l?void 0===s[d-1]?a.charAt(1):s[d-1]+a.charAt(1):t}i=s[u-1]}return void 0===i?"":i}))}}))},"5c63":function(e,t,n){"use strict";var r=n("ded7"),s=n.n(r);s.a},6547:function(e,t,n){var r=n("a691"),s=n("1d80"),a=function(e){return function(t,n){var a,c,i=String(s(t)),o=r(n),l=i.length;return o<0||o>=l?e?"":void 0:(a=i.charCodeAt(o),a<55296||a>56319||o+1===l||(c=i.charCodeAt(o+1))<56320||c>57343?e?i.charAt(o):a:e?i.slice(o,o+2):c-56320+(a-55296<<10)+65536)}};e.exports={codeAt:a(!1),charAt:a(!0)}},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},9263:function(e,t,n){"use strict";var r=n("ad6d"),s=n("9f7f"),a=RegExp.prototype.exec,c=String.prototype.replace,i=a,o=function(){var e=/a/,t=/b*/g;return a.call(e,"a"),a.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=s.UNSUPPORTED_Y||s.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=o||u||l;d&&(i=function(e){var t,n,s,i,d=this,f=l&&d.sticky,v=r.call(d),g=d.source,p=0,h=e;return f&&(v=v.replace("y",""),-1===v.indexOf("g")&&(v+="g"),h=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(g="(?: "+g+")",h=" "+h,p++),n=new RegExp("^(?:"+g+")",v)),u&&(n=new RegExp("^"+g+"$(?!\\s)",v)),o&&(t=d.lastIndex),s=a.call(f?n:d,h),f?s?(s.input=s.input.slice(p),s[0]=s[0].slice(p),s.index=d.lastIndex,d.lastIndex+=s[0].length):d.lastIndex=0:o&&s&&(d.lastIndex=d.global?s.index+s[0].length:t),u&&s&&s.length>1&&c.call(s[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(s[i]=void 0)})),s}),e.exports=i},"9f7f":function(e,t,n){"use strict";var r=n("d039");function s(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=s("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=s("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,n){"use strict";var r=n("23e7"),s=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),s=n("d039"),a=n("b622"),c=n("9263"),i=n("9112"),o=a("species"),l=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=a("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),v=!s((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var g=a(e),p=!s((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),h=p&&!s((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[o]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return t=!0,null},n[g](""),!t}));if(!p||!h||"replace"===e&&(!l||!u||f)||"split"===e&&!v){var x=/./[g],m=n(g,""[e],(function(e,t,n,r,s){return t.exec===c?p&&!s?{done:!0,value:x.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),E=m[0],_=m[1];r(String.prototype,e,E),r(RegExp.prototype,g,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}d&&i(RegExp.prototype[g],"sham",!0)}},ded7:function(e,t,n){}}]);
//# sourceMappingURL=chunk-58b930c2.363298e4.js.map